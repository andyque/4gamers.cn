<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>我的Git工作流(上) - 子龙山人</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="zilongshanren" /><meta name="description" content="这篇文章主要是记录一下我自己的Git工作流。 我从2010年下半年开始接触Git起，到今天也有快4年的时间了。在接触Git之前，版本控制系统里" /><meta name="keywords" content="Emacs, Cocos2d, Graphics, Unity, GameDev, Game Development" />






<meta name="generator" content="Hugo 0.100.1 with theme even" />


<link rel="canonical" href="https://zilongshanren.com/post/my-git-workflow-part-one/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="我的Git工作流(上)" />
<meta property="og:description" content="这篇文章主要是记录一下我自己的Git工作流。 我从2010年下半年开始接触Git起，到今天也有快4年的时间了。在接触Git之前，版本控制系统里" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zilongshanren.com/post/my-git-workflow-part-one/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2014-06-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2014-06-25T00:00:00+00:00" />

<meta itemprop="name" content="我的Git工作流(上)">
<meta itemprop="description" content="这篇文章主要是记录一下我自己的Git工作流。 我从2010年下半年开始接触Git起，到今天也有快4年的时间了。在接触Git之前，版本控制系统里"><meta itemprop="datePublished" content="2014-06-25T00:00:00+00:00" />
<meta itemprop="dateModified" content="2014-06-25T00:00:00+00:00" />
<meta itemprop="wordCount" content="1850">
<meta itemprop="keywords" content="Git," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="我的Git工作流(上)"/>
<meta name="twitter:description" content="这篇文章主要是记录一下我自己的Git工作流。 我从2010年下半年开始接触Git起，到今天也有快4年的时间了。在接触Git之前，版本控制系统里"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">子龙山人</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/learnemacs/">
        <li class="mobile-menu-item">LearnEmacs</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">子龙山人</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/learnemacs/">LearnEmacs</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">我的Git工作流(上)</h1>

      <div class="post-meta">
        <span class="post-time"> 2014-06-25 </span>
        <div class="post-category">
            <a href="/categories/git/"> Git </a>
            </div>
          <span class="more-meta"> 约 1850 字 </span>
          <span class="more-meta"> 预计阅读 4 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#初始化工作">初始化工作</a></li>
    <li><a href="#功能开发">功能开发</a></li>
    <li><a href="#使用git作为个人项目管理的好处">使用Git作为个人项目管理的好处</a></li>
    <li><a href="#结语">结语</a></li>
    <li><a href="#推荐阅读">推荐阅读：</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <!-- raw HTML omitted -->
<p>这篇文章主要是记录一下我自己的Git工作流。
我从2010年下半年开始接触Git起，到今天也有快4年的时间了。在接触Git之前，版本控制系统里面我只用过svn，而且还只是会最简单的update和commit。当时，感觉版本控制这东西挺不错的，程序出了问题，还可以回滚。但是，当时对于版本控制的理解，好像就仅限于“文件备份”功能&ndash;终于不用每一个版本都新建一个文件夹存起来，打上时间戳了。</p>
<!-- raw HTML omitted -->
<p>但是，自从Git用了3年多时间后，我可以毫不夸张地说，它把svn不知道甩了几条街了。当然，本文绝不是吐槽来着，svn比较简单，用于非程序人员管理一些文件资源（比如美术和策划方案）还是挺不错的。因为你要向一个非程序人员培训Git，真的很不容易。</p>
<p>下面以我在做一个个人项目为例，该项目是一个游戏，名为SuperCandyNinjiaRun,为了节约成本，采用cocos2d-x来开发。目前只有我一个程序（兼职美术和策划）</p>
<h2 id="初始化工作">初始化工作</h2>
<p>新建好项目之后，打开终端，运行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">git</span> <span class="n">init</span>
</span></span><span class="line"><span class="cl"><span class="n">git</span> <span class="n">add</span> <span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="err">&#39;</span><span class="n">first</span> <span class="n">commit</span><span class="err">&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样我的项目就纳入Git版本管理了。</p>
<p>接下来，我需要添加一个.gitignore文件，用来忽略掉一些不想被Git管理的文件，比如编译过程中产生的Obj和libs文件，以及一些用户相关的配置文件，另外还有mact系统下面恶心的.DS_Store文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">touch</span> <span class="p">.</span><span class="n">gitignore</span>
</span></span><span class="line"><span class="cl"><span class="n">vim</span> <span class="p">.</span><span class="n">gitignore</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后添加一些忽略规则进去：(规则里面支持正则表达式）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="p">.</span><span class="n">DS_Store</span>
</span></span><span class="line"><span class="cl"><span class="n">objs</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="n">libs</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">Dd</span><span class="p">]</span><span class="n">ebug</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">Dd</span><span class="p">]</span><span class="n">ebug</span><span class="p">.</span><span class="n">win32</span><span class="o">/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="功能开发">功能开发</h2>
<p>首先，游戏当然是开发核心玩法，即游戏原型制作。这个原型可能后面会被丢弃，或者被借鉴一部分。总之，这只是我的一些测试性idea。所以，这里当然要用分支(topic分支)啦。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">prototype</span>
</span></span><span class="line"><span class="cl"><span class="c1">//do some coding
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="err">&#39;</span><span class="n">finish</span> <span class="n">featrue1</span><span class="err">&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//do some coding
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="err">&#39;</span><span class="n">finish</span> <span class="n">feature2</span><span class="err">&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注：这些分支存在的时间不会很长，实现功能以后就要合并到主分去，并且删除之。</p>
<p>当然，在原型实现的过程，可能还会遇到一些临时性的想法，还可以继续开分支，然后做完以后，如果ok就合并到prototype，如果不行，就丢掉。
合并我会用到下列命令:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">git</span> <span class="n">merge</span> <span class="n">test_feature3</span> <span class="n">prototype</span>
</span></span><span class="line"><span class="cl"><span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">d</span> <span class="n">test_feature3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果是丢掉这个分支里的内容，可以先切换回原来的分支，然后强制删除新的分支：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">git</span> <span class="n">checkout</span> <span class="n">prototype</span>
</span></span><span class="line"><span class="cl"><span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">D</span> <span class="n">test_feature4</span> <span class="p">(</span><span class="err">注意这里需要用大写的</span><span class="o">-</span><span class="n">D</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里我的原则就是，commit early and commit often. 同时尽量保持每一个commit做的事情单一。 如果要保持版本库的历史记录好看，在合并特性分支到主分支的时候，除了使用merge，还可以使用rebase，比如:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//假调当前我在一个test_feature9上面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">git</span> <span class="n">rebase</span> <span class="n">prototype</span>  <span class="err">（或者使用</span><span class="n">rebase</span> <span class="o">-</span><span class="n">i来整理commit</span> <span class="n">log</span><span class="err">）</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为我们经常commit，就有可能导致有时候一些commit log写得不完整或者不清楚。有时候也可能导致一个功能可能被拆分到多个commit里面去了。这时候要使用rebase或者使用&ndash;squash的方法来整理git commit log。这一点，可以参考<a href="https://sandofsky.com/blog/git-workflow.html">这篇文章</a>。</p>
<p>如果有时候在写代码的时候，忘了要切分支去弄了。可以先用git stash save xxx来保存工作区的内容，然后新建 一个分支并调用git stash pop就可以把刚刚的patch应用到新分支上面。</p>
<p>如果对于commit的log格式有特殊要求的，还可以编写钩子程序，用一些正则表达式来检查commit消息的格式是否正确。这样可以防止某些人在commit的时候写一些无用的commit log。</p>
<p>至于一个产品更细致的分支的艺术，请<a href="http://nvie.com/posts/a-successful-git-branching-model/">参考此文</a></p>
<h2 id="使用git作为个人项目管理的好处">使用Git作为个人项目管理的好处</h2>
<p>分支可以让我编写代码的时候更自信，因为我完全不用担心自己的代码会不会破坏已有的代码。同时，由于我经常commit，这样我即使犯错，回滚的成本也很低。再次，它让我在项目过程中更愿意去尝试一些新的idea。我现在写代码要是没有Git，我写半个小时，心里就开始发慌了。因为代码量一多，我就感觉自己要hold不住了。
另外，如果自己不小心在test的时候，犯了错误 ，引起了bug。这个时候，你不清楚是哪一行代码修改导致的问题。可以尝试使用git bisect工具来找出有问题的commit记录。这个工具最近帮了我一个大忙，感谢Git！</p>
<h2 id="结语">结语</h2>
<p>本文主要介绍我日常中用到的一些基本的Git命令，当然还有git reset, git clean等命令没有涉及到。
作为一个21世纪的程序员，如果还没有用Git和Github，那就真的Out了。
其中很多常用命令都被我重定义了，比如git简化为g，commit简化为cm。总之，怎么简单怎么来，更多配置信息可以查看Github上面的<a href="https://github.com/andyque/dotfiles/blob/master/.gitconfig">gitconfig</a></p>
<h2 id="推荐阅读">推荐阅读：</h2>
<ul>
<li>
<p><a href="http://nvie.com/posts/a-successful-git-branching-model/">一个成功的Git分支模型</a></p>
</li>
<li>
<p><a href="https://sandofsky.com/blog/git-workflow.html">git workflow</a></p>
</li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">zilongshanren</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2014-06-25
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/weixin-donate.jpeg">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/zhifubao-donate.jpeg">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/git/">Git</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/my-git-workflow-part-two/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">我的Git工作流(下)</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/opengl-es2-0-use-vbo/">
            <span class="next-text nav-default">OpenGL ES2.0教程:使用VBO索引(4)</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  <span id="/post/my-git-workflow-part-one/" class="leancloud_visitors" data-flag-title="我的Git工作流(上)">
		<span class="post-meta-item-text">文章阅读量 </span>
		<span class="leancloud-visitors-count">0</span>
		<p></p>
	  </span>
  <div id="vcomments"></div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: '1y2RI6iDeYb4WnMd9lQjneND-gzGzoHsz',
        appKey: 'qVkxNVrkxjNujG8KmGlbmbWN',
        notify:  false ,
        verify:  false ,
        avatar:'mm',
        placeholder: '说点什么吧...',
        visitor:  true 
    });
  </script>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:guanghui8827@126.com" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/users/3790559/zilongshanren" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://twitter.com/zilongshanren" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/zilongshanren" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://www.linkedin.com/in/zilongshanren" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://www.douban.com/people/quguanghui/" class="iconfont icon-douban" title="douban"></a>
      <a href="https://github.com/zilongshanren" class="iconfont icon-github" title="github"></a>
      <a href="https://www.weibo.com/zilongshanren" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/zilongshanren/" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://space.bilibili.com/292659700" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://zilongshanren.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>zilongshanren</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.191509a5c8442abdb6eb5020a332fd59bdd83a7e78a2d2241108df9113504292.js"></script>








</body>
</html>
