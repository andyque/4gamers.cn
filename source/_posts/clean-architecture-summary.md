---
author: 0owen
comments: true
date: 2018-09-01
layout: post
slug: 'summary of clean architecture'
title: 《Clean Architecture》读后感
categories:
- programming life
tags:
- programming life
---

## 一、前言
软件架构非常重要，架构的主要目的是最小化系统开发和维护的人力成本，提高开发人员的开发效率。
软件设计和软件构架有本质区别，架构更关心软件的高层设计，怎么定义系统和模块的边界，而设计更关心底层的实现细节。
优雅的架构通常不是那么容易就获得的，他需要开发人员去争取、去斗争、去追求。

通常软件有两个维度的要素：功能性和结构性。而大多数时候，国内的研发团队只关心软件的功能性，而忽略结构性。通常这不是开发的错，
开发一般话语权不大，被产品和老大推着走。

所以，软件构架不只在于技术，还关乎管理。如果技术管理的老大在团队中不够强硬，那么就容易出问题。在面对产品和PM的时候，不敢据理力争。

按照本书的理论，软件开发过程中的事情分为四个维度：
- 核心功能（重要且紧急）
- 软件构架，代码重构（不紧急且重要）
- 非核心功能（紧急但不重要）
- 垃圾功能（不紧急也不重要）

因为在国内的研发团队里面，产品可以无限试错，而开发可以无限加班，PM可以无限压榨。所以，作为技术leader需要硬起来，否则无解，不管是大公司还是小公司。
大家都是产品的干系人，产品最后好不好，大家有共同的责任。

另外，在编程方面，leader的眼光的眼光和业务能力也很重要。因为他需要及时识别出需求里的变化并采取合理的策略进行代码抽象。
因为架构是需要演进的，代码是会腐烂的，如果一开始的架子搭的不好，腐烂的速度会变得更快。

另外，开发人员太自信也是有害的，动不动就重写并不能解决所有问题。

软件构架不可一促而就，代码结构也是一样，要定期进行重构和代码审查，及时解决代码里面的坏味道。但是如果没有好的开发流程，没有完备的测试，重构和代码审查几乎都是
很难实施的。


## 二、编程范式
这一节作者讲了主流的三种编程范式，作者强调，这些编程范式并不是增加了开发人员的能力，而是增加了某种约束（或者叫编码自律）。

### 结构化编程：
在结构化编程出现以前，人们可以自由地使用Goto语句，而结构化编程出现后，有人提出了程序可以只用『顺序』、『选择』和『循环』的组合来完成，Goto语句是有害的。
程序设计采用自顶向下，逐层分解的方式来设计，最后拆分成的子过程就可以完全用上述三种结构来实现。
构结化编程限制了你滥用Goto语句的能力，而没有增加什么新功能。

### 面向对象编程：
什么是面向对象？有人可能会说是『封装』、『继承』和『多态』。作者认为面向对象的精髓在于多态，它可以优雅地解决软件系统里面的代码依赖问题。
尽量依赖于抽象和接口，而不是依赖于具体实现，这样就可以非常好地划分系统边界。
面向对象的封装限制了你直接访问类的数据和函数的能力。OO限制了你直接控制代码流程的能力，通过多态和接口划分的系统接口，你很难破坏。


### 函数式编程：
函数式编程限制了你的代码副作用，限制了你直接使用赋值语句的能力。现在面向对象的编程范式已经很普遍了，但是软件的质量和bug数量并没有得到有效控制。
代码副作用随处可见，这些都是导致代码产生各种难以理解的bug的根缘。

三、设计原则（更多关心的是Design）
SOLID原则 
1. 单一职责原则： 不单单指函数或类的功能是单一的内聚的。而是说一个模块（类或函数）只有一个引起它进行变化的原则。这里的变化包括添加新feature，改bug。
2. 开闭原则 
3. 里氏替换原则 
4. 接口隔离原则
5. 依赖倒转原则


四、组件原则
大系统进行拆分，多个团队负责独立开发。不适应于小项目和项目初期。SOA不一定是最好的。

五、常见的架构设计原则 
分层架构
分功能架构
洋葱架构
正交形架构
定义子系统的边界
定义商业规则
TDD测试圈
如果有多个类相互依赖，就定义一个外观类，把它们约束起来。只暴露简单清晰的接口和外部产生依赖。
presenters and humber object

六、细节的东西需要有抽象
数据库
web
UI
框架（u3d, cocos）

七、总结 
解决软件复杂性。
把业务逻辑体现在代码逻辑里面。
减少代码依赖，对框架的依赖，对库的依赖，对外部系统的依赖。
再好的架构，如果实施的不好，也会破坏。
定义清楚系统的边界很重要。



less is more

